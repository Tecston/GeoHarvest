<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoHarvest Dashboard</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    
    <!-- Font Awesome para íconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- AOS CSS para animaciones al hacer scroll (igual que en index) -->
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    
    <!-- Estilo personalizado -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Estilos específicos del dashboard -->
    <style>
        /* Estilos para mantener coherencia con el index */
        .dashboard-container {
            position: relative;
            overflow-x: hidden;
        }
        
        .dashboard-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        
        .hover-lift {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .pulse-animation {
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .widget {
            transition: all 0.3s ease;
        }
        
        /* Efectos de degradado como en index */
        .gradient-bg {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            border-radius: 10px;
            color: white;
        }
    </style>
</head>
<body>
    <!-- Contenedor para partículas Three.js (igual que en index) -->
    <div class="dashboard-particles" id="particles-background"></div>

    <div class="dashboard-container">
        <!-- Sidebar navigation -->
        <aside class="sidebar" data-aos="fade-right" data-aos-duration="800">
            <div class="logo">
                <img src="assets/logo.png" alt="GeoHarvest Logo">
                <h1>GeoHarvest</h1>
            </div>
            <nav class="sidebar-menu">
                <ul>
                    <li class="active" id="producer-toggle">
                        <a href="#"><i class="fas fa-tractor"></i> Dashboard Productor</a>
                    </li>
                    <li id="bank-toggle">
                        <a href="#"><i class="fas fa-landmark"></i> Dashboard Financiero</a>
                    </li>
                    <li id="buyer-toggle">
                        <a href="#"><i class="fas fa-store"></i> Dashboard Comprador</a>
                    </li>
                    <li>
                        <a href="#"><i class="fas fa-chart-line"></i> Análisis</a>
                    </li>
                    <li>
                        <a href="#"><i class="fas fa-cog"></i> Configuración</a>
                    </li>
                    <li>
                        <a href="#"><i class="fas fa-question-circle"></i> Ayuda</a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <img src="assets/avatar.jpg" alt="User Avatar">
                    </div>
                    <div class="user-details">
                        <h4>Juan Pérez</h4>
                        <p>Productor</p>
                    </div>
                </div>
                <div class="user-dropdown">
                    <ul>
                        <li><a href="#"><i class="fas fa-user"></i> Perfil</a></li>
                        <li><a href="#"><i class="fas fa-cog"></i> Configuración</a></li>
                        <li><a href="#"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a></li>
                    </ul>
                </div>
            </div>
        </aside>

        <!-- Main content -->
        <main class="dashboard-content">
            <!-- Top bar -->
            <div class="topbar">
                <button class="toggle-sidebar">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="topbar-title">
                    Dashboard
                </div>
                <div class="topbar-actions">
                    <button class="notification-button">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                    <button class="dark-mode-toggle">
                        <i class="fas fa-moon"></i>
                    </button>
                    <div class="parcel-selector-container">
                        <select id="parcel-selector">
                            <option value="all">Todas las parcelas</option>
                            <option value="parcel1">Parcela 1</option>
                            <option value="parcel2">Parcela 2</option>
                            <option value="parcel3">Parcela 3</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Notification banner -->
            <div class="notification-banner pulse-animation">
                <p><i class="fas fa-info-circle"></i> Bienvenido al nuevo dashboard de GeoHarvest. Explora las nuevas características.</p>
                <button class="close"><i class="fas fa-times"></i></button>
            </div>

            <!-- Panel selector con efectos hover -->
            <div class="panel-selector" data-aos="fade-up" data-aos-delay="200" data-aos-duration="800">
                <div class="panel-option active hover-lift" data-panel="producer">
                    <i class="fas fa-tractor"></i> Vista Productor
                </div>
                <div class="panel-option hover-lift" data-panel="bank">
                    <i class="fas fa-landmark"></i> Vista Financiera
                </div>
                <div class="panel-option hover-lift" data-panel="buyer">
                    <i class="fas fa-store"></i> Vista Comprador
                </div>
            </div>

            <!-- Panel content -->
            <div class="panels-container">
                <!-- Producer Panel -->
                <div id="producer-panel" class="panel-content active">
                    <!-- KPI Cards con animación AOS -->
                    <div class="kpi-cards">
                        <div class="kpi-card hover-lift" data-aos="fade-up" data-aos-delay="100">
                            <h3>52%</h3>
                            <p class="kpi-label">Humedad promedio</p>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-up"></i> 3%
                            </div>
                        </div>
                        <div class="kpi-card hover-lift" data-aos="fade-up" data-aos-delay="200">
                            <h3>26°C</h3>
                            <p class="kpi-label">Temperatura</p>
                            <div class="kpi-trend negative">
                                <i class="fas fa-arrow-up"></i> 2°C
                            </div>
                        </div>
                        <div class="kpi-card hover-lift" data-aos="fade-up" data-aos-delay="300">
                            <h3>14.3%</h3>
                            <p class="kpi-label">Aumento en rendimiento</p>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-up"></i> 2.1%
                            </div>
                        </div>
                        <div class="kpi-card hover-lift" data-aos="fade-up" data-aos-delay="400">
                            <h3>18%</h3>
                            <p class="kpi-label">Ahorro de agua</p>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-up"></i> 4%
                            </div>
                        </div>
                    </div>

                    <!-- First row of widgets -->
                    <div class="widgets-row">
                        <div class="widget medium-widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-water"></i> Humedad del suelo</h3>
                                <div class="widget-actions">
                                    <button class="widget-action"><i class="fas fa-sync-alt"></i></button>
                                    <button class="widget-action"><i class="fas fa-ellipsis-v"></i></button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="humidity-chart"></canvas>
                            </div>
                        </div>

                        <div class="widget medium-widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-temperature-high"></i> Temperatura</h3>
                                <div class="widget-actions">
                                    <button class="widget-action"><i class="fas fa-sync-alt"></i></button>
                                    <button class="widget-action"><i class="fas fa-ellipsis-v"></i></button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="temperature-chart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Second row of widgets -->
                    <div class="widgets-row">
                        <div class="widget large-widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-map-marked-alt"></i> Mapa de parcelas</h3>
                                <div class="widget-actions">
                                    <button id="map-zoom-in" class="widget-action"><i class="fas fa-plus"></i></button>
                                    <button id="map-zoom-out" class="widget-action"><i class="fas fa-minus"></i></button>
                                    <button id="map-locate" class="widget-action"><i class="fas fa-location-arrow"></i></button>
                                </div>
                            </div>
                            <div id="crop-map" class="map-container"></div>
                        </div>

                        <div class="widget small-widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-cloud-sun"></i> Clima</h3>
                                <div class="widget-actions">
                                    <button class="widget-action"><i class="fas fa-sync-alt"></i></button>
                                </div>
                            </div>
                            <div class="weather-indicators">
                                <!-- Weather content populated by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Third row of widgets -->
                    <div class="widgets-row">
                        <div class="widget medium-widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-seedling"></i> Nutrientes del suelo</h3>
                                <div class="widget-actions">
                                    <button class="widget-action"><i class="fas fa-sync-alt"></i></button>
                                    <button class="widget-action"><i class="fas fa-ellipsis-v"></i></button>
                                </div>
                            </div>
                            <div class="chart-container radar-chart-container">
                                <canvas id="nutrients-chart"></canvas>
                            </div>
                        </div>

                        <div class="widget medium-widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-satellite"></i> Datos satelitales</h3>
                                <div class="widget-actions">
                                    <button class="widget-action"><i class="fas fa-sync-alt"></i></button>
                                    <button class="widget-action"><i class="fas fa-ellipsis-v"></i></button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="satellite-chart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Alerts and Recommendations -->
                    <div class="widgets-row">
                        <div class="widget medium-widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-exclamation-triangle"></i> Alertas</h3>
                                <span class="badge">3</span>
                            </div>
                            <div id="alerts-container" class="alerts-container">
                                <!-- Alerts populated by JS -->
                            </div>
                        </div>

                        <div class="widget medium-widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-brain"></i> Recomendaciones IA</h3>
                                <span class="badge green">3</span>
                            </div>
                            <div id="recommendations-container" class="alerts-container">
                                <!-- Recommendations populated by JS -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bank Panel -->
                <div id="bank-panel" class="panel-content">
                    <!-- Credit score -->
                    <div class="kpi-cards">
                        <div class="kpi-card">
                            <h3>82/100</h3>
                            <p class="kpi-label">Puntuación crediticia</p>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-up"></i> 5
                            </div>
                        </div>
                        <div class="kpi-card">
                            <h3>$158,342</h3>
                            <p class="kpi-label">Ingresos mensuales</p>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-up"></i> 12%
                            </div>
                        </div>
                        <div class="kpi-card">
                            <h3>$42,500</h3>
                            <p class="kpi-label">Préstamo disponible</p>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-up"></i> 8%
                            </div>
                        </div>
                        <div class="kpi-card">
                            <h3>4.2%</h3>
                            <p class="kpi-label">Tasa de interés</p>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-down"></i> 0.5%
                            </div>
                        </div>
                    </div>

                    <!-- First row of widgets -->
                    <div class="widgets-row">
                        <div class="widget medium-widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-chart-pie"></i> Puntuación crediticia</h3>
                                <div class="widget-actions">
                                    <button class="widget-action"><i class="fas fa-info-circle"></i></button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="credit-score-chart"></canvas>
                            </div>
                        </div>

                        <div class="widget medium-widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-money-bill-wave"></i> Oportunidades financieras</h3>
                            </div>
                            <div class="finance-opportunities">
                                <div class="finance-opportunity">
                                    <div class="opportunity-icon">
                                        <i class="fas fa-seedling"></i>
                                    </div>
                                    <div class="opportunity-content">
                                        <h4>Préstamo de equipamiento</h4>
                                        <p>Hasta $25,000 con 3.8% de interés</p>
                                        <div class="opportunity-actions">
                                            <button class="btn-primary">Solicitar</button>
                                            <button class="btn-outline">Detalles</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="finance-opportunity">
                                    <div class="opportunity-icon">
                                        <i class="fas fa-tractor"></i>
                                    </div>
                                    <div class="opportunity-content">
                                        <h4>Seguro de cosecha</h4>
                                        <p>15% de descuento en temporada baja</p>
                                        <div class="opportunity-actions">
                                            <button class="btn-primary">Solicitar</button>
                                            <button class="btn-outline">Detalles</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Buyer Panel -->
                <div id="buyer-panel" class="panel-content">
                    <div class="kpi-cards">
                        <div class="kpi-card">
                            <h3>152 ton</h3>
                            <p class="kpi-label">Producción estimada</p>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-up"></i> 8%
                            </div>
                        </div>
                        <div class="kpi-card">
                            <h3>Jun 2025</h3>
                            <p class="kpi-label">Fecha estimada de cosecha</p>
                            <div class="kpi-trend neutral">
                                <i class="fas fa-minus"></i> Según lo planeado
                            </div>
                        </div>
                        <div class="kpi-card">
                            <h3>A+</h3>
                            <p class="kpi-label">Calificación de calidad</p>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-up"></i> +1
                            </div>
                        </div>
                        <div class="kpi-card">
                            <h3>$1,250/ton</h3>
                            <p class="kpi-label">Precio estimado</p>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-up"></i> 3.5%
                            </div>
                        </div>
                    </div>

                    <div class="widgets-row">
                        <div class="widget large-widget">
                            <div class="widget-header">
                                <h3><i class="fas fa-clipboard-check"></i> Certificaciones</h3>
                            </div>
                            <div class="certifications-container">
                                <div class="certification">
                                    <img src="assets/cert-organic.png" alt="Certificado Orgánico">
                                    <h4>Certificado Orgánico</h4>
                                    <p>Válido hasta: Oct 2025</p>
                                </div>
                                <div class="certification">
                                    <img src="assets/cert-fairtrade.png" alt="Comercio Justo">
                                    <h4>Comercio Justo</h4>
                                    <p>Válido hasta: Dec 2025</p>
                                </div>
                                <div class="certification">
                                    <img src="assets/cert-sustainable.png" alt="Agricultura Sostenible">
                                    <h4>Agricultura Sostenible</h4>
                                    <p>Válido hasta: Sep 2025</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <!-- Leaflet JS para mapas -->
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    
    <!-- Chart.js para gráficas -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- GSAP para animaciones -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    
    <!-- ScrollTrigger plugin para GSAP (igual que en index) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
    
    <!-- Three.js para efectos de fondo (igual que en index) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    
    <!-- AOS para animaciones al hacer scroll (igual que en index) -->
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    
    <!-- Vanilla-tilt.js para efectos 3D en hover (igual que en index) -->
    <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.0/dist/vanilla-tilt.min.js"></script>
    
    <!-- Scripts propios -->
    <script src="assets/demo-data.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>